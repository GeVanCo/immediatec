#!/bin/bash

########################################################################
#
#	make lists for icc test
#
########################################################################

usage ()
{
    echo 'Usage:	'${0##*/}' [-h]' >&2
    echo '	-h	this help text' >&2
    echo 'make different lists in a Test directory' >&2
    echo '	p.lt	# all for copying' >&2
    echo '	pd.lt	# sources, includes and derived for comparing' >&2
    echo '	pe.lt	# executables only' >&2
    echo '	pc.lt	# C files only' >&2
    echo '	pi.lt	# ini files only' >&2
    echo '	pl.lt	# lst files only' >&2
    echo '	p6.lt	# lst6 files only' >&2
    echo '	pp.lt	# iC files only' >&2
    echo '	$Id: ml,v 1.8 2004/02/24 09:34:36 jw Exp $' >&2
}

while [[ $# > 0 ]]; do
    case $1 in
    -)	shift; break;;
    -*)	option=${1#?}
	while [[ -n "$option" ]]; do
	    case "$option" in
	    h*)	usage; exit 255;;
	    *) aflag="-$option"; break;;
	    esac
	    option=${option#?}
	done;;
    *)	break;;
    esac
    shift
done

mklst *.i[ch] > p.lt	# all for copying
mklst -d *.i[ch] > pd.lt	# sources, includes and derived for comparing
mklst -e *.ic > pe.lt	# executables only
mklst -c *.ic > pc.lt	# C files only
mklst -i *.ic > pi.lt	# ini files only
mklst -l *.ic > pl.lt	# lst files only
mklst -6 *.ic > p6.lt	# lst6 files only
mklst -p *.ic > pp.lt	# iC files only

if [[ -f Init.out ]]; then
    echo Init.out >> p.lt
    echo Init.out >> pd.lt
fi

if [[ -f Init.out6 ]]; then
    echo Init.out6 >> p6.lt
fi
